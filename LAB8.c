#include <stdio.h>
#include <stdlib.h>


struct Node
{
	int key;
	struct Node* left;
	struct Node* right;
	void *data;	
};

int max(int a,int b);

int height(struct Node *N)
{
	if(N==NULL)
	return 0;
	return N->height;
}

int max(int a,int b)
{
	return (a>b)?a:b;
}

struct Node *newNode(int key)
{
	struct Node* node=(struct Node*)malloc(sizeof(struct Node));
	node->key=key;
	node->left=NULL;
	node->right=NULL;
	node->height=1;
	return (node);
}

struct Node *rightRotate(struct Node *y)
{
	struct Node *x=y->left;
	struct Node *T2=x->right;
	
	x->right=y;
	y->left=T2;
	
	y->height=max(height(y->left),height(x->right))+1;
	x->height=max(height(x->left),height(y->right))+1;
	
	return x;
	
}

struct Node *leftRotate(struct Node *x)
{
	struct Node *y=x->right;
	struct Node *T2=y->left;
	
	y->left=x;
	x->right=T2;
	
	x->height=max(height(x->left),height(x->right))+1;
	y->height=max(height(y->left),height(y->right))+1;
	
	return y;
}

int getBalance(struct Node *N)
{
	if(N==NULL)
	return 0;
	return height(N->left)-height(N->right);
}


struct Node* insert(struct Node* node,int key)
{
	if(node==NULL)
	return(newNode(key));
	
	if(key < node->key)
	{
		node->left=insert(node->left,key);
	}
	else if(key > node->key)
	{
		node->right=insert(node->right,key);
	}
	else
		return (node);
	
	node->height=1+max(height(node->left),height(node->right));
	
	int balance=getBalance(node);
	
	//Left-Left Case
	if(balance > 1 && key<node->left->key)
	{
		return rightRotate(node);
	}
	//Left-Right Case
	if(balance < -1 && key<node->right->key)
	{
		return leftRotate(node);
	}
	//Right-Left Case
	if(balance > 1 && key<node->left->key)
	{
		node->left=leftRotate(node->left);
		return rightRotate(node);
	}
	//Right-Right Case
	if(balance < -1 && key<node->right->key)
	{
		node->right=rightRotate(node->right);
		return leftRotate(node);
	}
	
	return node;
	
	int key[986] = {
	512, 256, 128, 64, 32, 16, 8, 4, 2, 1, 3, 6, 5, 7, 12, 10, 9, 11,
	14, 13, 15, 24, 20, 18, 17, 19, 22, 21, 23, 28, 26, 25, 27,
	30, 29, 31, 48, 40, 36, 34, 33, 35, 38, 37, 39, 44, 42, 41,
	43, 46, 45, 47, 56, 52, 50, 49, 51, 54, 53, 55, 60, 58, 57,
	59, 62, 61, 63, 96, 80, 72, 68, 66, 65, 67, 70, 69, 71, 76,
	74, 73, 75, 78, 77, 79, 88, 84, 82, 81, 83, 86, 85, 87, 92,
	90, 89, 91, 94, 93, 95, 112, 104, 100, 98, 97, 99, 102, 101,
	103, 108, 106, 105, 107, 110, 109, 111, 120, 116, 114, 113,
	115, 118, 117, 119, 124, 122, 121, 123, 126, 125, 127, 192,
	160, 144, 136, 132, 130, 129, 131, 134, 133, 135, 140, 138,
	137, 139, 142, 141, 143, 152, 148, 146, 145, 147, 150, 149,
	151, 156, 154, 153, 155, 158, 157, 159, 176, 168, 164, 162,
	161, 163, 166, 165, 167, 172, 170, 169, 171, 174, 173, 175,
	184, 180, 178, 177, 179, 182, 181, 183, 188, 186, 185, 187,
	190, 189, 191, 224, 208, 200, 196, 194, 193, 195, 198, 197,
	199, 204, 202, 201, 203, 206, 205, 207, 216, 212, 210, 209,
	211, 214, 213, 215, 220, 218, 217, 219, 222, 221, 223, 240,
	232, 228, 226, 225, 227, 230, 229, 231, 236, 234, 233, 235,
	238, 237, 239, 248, 244, 242, 241, 243, 246, 245, 247, 252,
	250, 249, 251, 254, 253, 255, 384, 320, 288, 272, 264, 260,
	258, 257, 259, 262, 261, 263, 268, 266, 265, 267, 270, 269,
	271, 280, 276, 274, 273, 275, 278, 277, 279, 284, 282, 281,
	283, 286, 285, 287, 304, 296, 292, 290, 289, 291, 294, 293,
	295, 300, 298, 297, 299, 302, 301, 303, 312, 308, 306, 305,
	307, 310, 309, 311, 316, 314, 313, 315, 318, 317, 319, 352,
	336, 328, 324, 322, 321, 323, 326, 325, 327, 332, 330, 329,
	331, 334, 333, 335, 344, 340, 338, 337, 339, 342, 341, 343,
	348, 346, 345, 347, 350, 349, 351, 368, 360, 356, 354, 353,
	355, 358, 357, 359, 364, 362, 361, 363, 366, 365, 367, 376,
	372, 370, 369, 371, 374, 373, 375, 380, 378, 377, 379, 382,
	381, 383, 448, 416, 400, 392, 388, 386, 385, 387, 390, 389,
	391, 396, 394, 393, 395, 398, 397, 399, 408, 404, 402, 401,
	403, 406, 405, 407, 412, 410, 409, 411, 414, 413, 415, 432,
	424, 420, 418, 417, 419, 422, 421, 423, 428, 426, 425, 427,
	430, 429, 431, 440, 436, 434, 433, 435, 438, 437, 439, 444,
	442, 441, 443, 446, 445, 447, 480, 464, 456, 452, 450, 449,
	451, 454, 453, 455, 460, 458, 457, 459, 462, 461, 463, 472,
	468, 466, 465, 467, 470, 469, 471, 476, 474, 473, 475, 478,
	477, 479, 496, 488, 484, 482, 481, 483, 486, 485, 487, 492,
	490, 489, 491, 494, 493, 495, 504, 500, 498, 497, 499, 502,
	501, 503, 508, 506, 505, 507, 510, 509, 511, 768, 640, 576,
	544, 528, 520, 516, 514, 513, 515, 518, 517, 519, 524, 522,
	521, 523, 526, 525, 527, 536, 532, 530, 529, 531, 534, 533,
	535, 540, 538, 537, 539, 542, 541, 543, 560, 552, 548, 546,
	545, 547, 550, 549, 551, 556, 554, 553, 555, 558, 557, 559,
	568, 564, 562, 561, 563, 566, 565, 567, 572, 570, 569, 571,
	574, 573, 575, 608, 592, 584, 580, 578, 577, 579, 582, 581,
	583, 588, 586, 585, 587, 590, 589, 591, 600, 596, 594, 593,
	595, 598, 597, 599, 604, 602, 601, 603, 606, 605, 607, 624,
	616, 612, 610, 609, 611, 614, 613, 615, 620, 618, 617, 619,
	622, 621, 623, 632, 628, 626, 625, 627, 630, 629, 631, 636,
	634, 633, 635, 638, 637, 639, 704, 672, 656, 648, 644, 642,
	641, 643, 646, 645, 647, 652, 650, 649, 651, 654, 653, 655,
	664, 660, 658, 657, 659, 662, 661, 663, 668, 666, 665, 667,
	670, 669, 671, 688, 680, 676, 674, 673, 675, 678, 677, 679,
	684, 682, 681, 683, 686, 685, 687, 696, 692, 690, 689, 691,
	694, 693, 695, 700, 698, 697, 699, 702, 701, 703, 736, 720,
	712, 708, 706, 705, 707, 710, 709, 711, 716, 714, 713, 715,
	718, 717, 719, 728, 724, 722, 721, 723, 726, 725, 727, 732,
	730, 729, 731, 734, 733, 735, 752, 744, 740, 738, 737, 739,
	742, 741, 743, 748, 746, 745, 747, 750, 749, 751, 760, 756,
	754, 753, 755, 758, 757, 759, 764, 762, 761, 763, 766, 765,
	767, 896, 832, 800, 784, 776, 772, 770, 769, 771, 774, 773,
	775, 780, 778, 777, 779, 782, 781, 783, 792, 788, 786, 785,
	787, 790, 789, 791, 796, 794, 793, 795, 798, 797, 799, 816,
	808, 804, 802, 801, 803, 806, 805, 807, 812, 810, 809, 811,
	814, 813, 815, 824, 820, 818, 817, 819, 822, 821, 823, 828,
	826, 825, 827, 830, 829, 831, 864, 848, 840, 836, 834, 833,
	835, 838, 837, 839, 844, 842, 841, 843, 846, 845, 847, 856,
	852, 850, 849, 851, 854, 853, 855, 860, 858, 857, 859, 862,
	861, 863, 880, 872, 868, 866, 865, 867, 870, 869, 871, 876,
	874, 873, 875, 878, 877, 879, 888, 884, 882, 881, 883, 886,
	885, 887, 892, 890, 889, 891, 894, 893, 895, 960, 928, 912,
	904, 900, 898, 897, 899, 902, 901, 903, 908, 906, 905, 907,
	910, 909, 911, 920, 916, 914, 913, 915, 918, 917, 919, 924,
	922, 921, 923, 926, 925, 927, 944, 936, 932, 930, 929, 931,
	934, 933, 935, 940, 938, 937, 939, 942, 941, 943, 952, 948,
	946, 945, 947, 950, 949, 951, 956, 954, 953, 955, 958, 957,
	959, 976, 968, 964, 962, 961, 963, 966, 965, 967, 972, 970,
	969, 971, 974, 973, 975, 992, 984, 980, 978, 977, 979, 982,
	981, 983, 988
};

int data[986] = {
	49, 32, 49, 97, 116, 103, 101, 99, 105, 35, 110, 117, 108,
	100, 116, 60, 32, 115, 105, 114, 110, 99, 10, 104, 46, 62, 105, 35,
	110, 101, 117, 108, 100, 60, 32, 115, 110, 10, 46, 105, 100, 111,
	62, 104, 10, 32, 110, 105, 116, 97, 109, 105, 105, 123, 41, 40, 32,
	10, 10, 9, 109, 116, 110, 32, 115, 101, 115, 53, 57, 32, 49, 101,
	103, 91, 56, 55, 93, 54, 32, 61, 123, 44, 54, 32, 32, 49, 44, 55,
	32, 48, 49, 44, 44, 48, 49, 51, 49, 32, 48, 32, 49, 49, 32, 44, 49,
	44, 48, 32, 32, 51, 48, 44, 50, 51, 44, 49, 44, 50, 49, 49, 49, 32,
	49, 49, 32, 44, 49, 44, 55, 32, 32, 57, 49, 32, 32, 52, 49, 44, 50,
	51, 44, 44, 48, 49, 52, 49, 32, 48, 48, 55, 32, 44, 57, 32, 44, 49,
	51, 44, 48, 32, 44, 50, 32, 44, 32, 49, 44, 55, 32, 51, 48, 44, 32,
	55, 57, 44, 48, 49, 53, 49, 48, 49, 32, 49, 32, 44, 49, 49, 44, 53,
	32, 54, 49, 44, 51, 44, 32, 32, 50, 51, 44, 55, 57, 44, 32, 50, 51,
	44, 49, 49, 57, 56, 44, 57, 32, 55, 49, 32, 48, 48, 32, 44, 49, 44,
	56, 32, 52, 32, 49, 44, 50, 32, 50, 48, 44, 44, 49, 49, 49, 49, 32,
	49, 49, 50, 32, 44, 51, 32, 44, 49, 49, 44, 49, 32, 48, 49, 44, 32,
	44, 44, 49, 44, 44, 48, 49, 49, 51, 32, 50, 52, 49, 32, 48, 32, 44,
	49, 32, 49, 44, 49, 32, 55, 49, 44, 44, 49, 49, 52, 51, 32, 50, 49,
	55, 44, 57, 32, 56, 49, 32, 49, 49, 32, 44, 49, 44, 52, 32, 44, 32,
	48, 49, 44, 49, 49, 53, 44, 51, 32, 50, 52, 32, 57, 49, 44, 44, 44,
	53, 32, 51, 52, 32, 56, 44, 51, 32, 50, 57, 32, 57, 56, 44, 57, 32,
	55, 49, 32, 48, 49, 32, 44, 49, 44, 49, 32, 49, 44, 32, 52, 49, 44,
	48, 49, 53, 49, 49, 32, 48, 32, 44, 49, 54, 52, 44, 53, 32, 44, 54,
	32, 49, 44, 53, 32, 56, 48, 44, 50, 53, 49, 49, 44, 49, 49, 54, 49,
	32, 48, 49, 32, 44, 49, 44, 52, 32, 32, 32, 48, 49, 44, 55, 57, 44,
	44, 49, 49, 54, 49, 32, 48, 44, 49, 49, 32, 44, 49, 44, 56, 32, 32,
	49, 48, 44, 48, 49, 56, 52, 49, 49, 32, 50, 32, 44, 52, 50, 32, 44,
	51, 32, 44, 49, 50, 44, 32, 49, 44, 49, 32, 49, 49, 44, 44, 49, 49,
	55, 51, 32, 50, 44, 44, 57, 32, 57, 57, 32, 55, 48, 49, 32, 49, 32,
	44, 51, 32, 57, 49, 32, 44, 49, 44, 57, 32, 49, 44, 55, 32, 56, 48,
	44, 44, 44, 48, 49, 55, 51, 32, 50, 49, 49, 32, 50, 32, 44, 49, 56,
	44, 51, 32, 44, 32, 49, 44, 49, 32, 55, 49, 44, 44, 49, 49, 52, 51,
	32, 50, 49, 48, 49, 32, 48, 32, 44, 49, 49, 44, 49, 32, 51, 48, 44,
	49, 44, 32, 50, 51, 44, 48, 49, 50, 49, 49, 32, 49, 32, 44, 49, 53,
	51, 44, 52, 32, 44, 50, 32, 53, 44, 50, 32, 44, 51, 32, 44, 48, 32,
	49, 44, 50, 32, 57, 48, 44, 44, 48, 49, 53, 49, 32, 49, 49, 49, 32,
	44, 49, 44, 55, 32, 32, 54, 49, 44, 48, 49, 49, 49, 52, 53, 49, 32,
	49, 32, 44, 52, 50, 32, 44, 51, 32, 44, 49, 32, 49, 44, 57, 32, 52,
	48, 44, 44, 48, 49, 53, 57, 32, 57, 44, 44, 48, 50, 52, 49, 32, 48,
	32, 44, 51, 55, 32, 44, 57, 32, 44, 49, 32, 49, 44, 56, 32, 53, 49,
	44, 44, 49, 49, 49, 51, 32, 50, 49, 55, 44, 57, 32, 56, 49, 32, 49,
	49, 32, 44, 49, 44, 52, 32, 44, 32, 48, 49, 44, 49, 49, 53, 44, 51,
	32, 50, 52, 32, 57, 49, 44, 44, 44, 53, 32, 51, 52, 32, 56, 44, 51,
	32, 50, 57, 32, 57, 56, 44, 57, 32, 55, 49, 32, 48, 49, 32, 44, 49,
	44, 49, 32, 49, 44, 32, 52, 49, 44, 48, 49, 53, 49, 49, 32, 48, 32,
	44, 49, 45, 51, 44, 53, 32, 44, 50, 32, 32, 48, 51, 44, 49, 45, 50,
	44, 51, 48, 32, 32, 49, 32, 44, 45, 57, 48, 44, 32, 50, 51, 44, 55,
	57, 44, 48, 44, 49, 49, 48, 49, 32, 48, 50, 32, 44, 51, 32, 44, 49,
	44, 32, 49, 44, 53, 32, 53, 49, 44, 32, 50, 51, 44, 48, 49, 57, 57,
	55, 49, 32, 49, 32, 44, 57, 48, 32, 44, 49, 44, 52, 32, 32, 53, 32,
	49, 44, 50, 32, 56, 48, 44, 44, 48, 49, 49, 49, 32, 49, 51, 49, 32,
	44, 49, 44, 53, 32, 49, 44, 50, 32, 50, 49, 44, 48, 44, 32, 55, 57,
	44, 48, 49, 53, 48, 49, 32, 49, 32, 44, 49, 32, 49, 44, 50, 32, 55,
	49, 44, 44, 48, 49, 56, 52, 32, 54, 115, 105, 48, 105, 125, 49, 32,
	48, 10, 59, 9, 105, 116, 110, 32, 61, 32, 32, 40, 102, 10, 59, 9,
	114, 111, 32, 32, 32, 105, 61, 59, 48, 32, 9, 32, 49, 60, 32, 32,
	56, 55, 59, 41, 43, 105, 43, 10, 123, 9, 34, 110, 114, 112, 105,
	102, 116, 40, 44, 99, 37, 34, 109, 32, 101, 101, 41, 101, 97, 115,
	103, 105, 91, 93, 125, 10, 59, 9, 9, 10, 114, 0, 10, 110, 117, 116,
	114, 48, 32, 59, 125 
};


}



int main()
{
	struct Node* root=NULL;
	
	root=insert(root,10);
	root=insert(root,20);
	root=insert(root,30);
	root=insert(root,40);
	root=insert(root,50);
	root=insert(root,25);

	return 0;
}
